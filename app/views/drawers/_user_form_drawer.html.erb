<%# User Form Drawer with Turbo Frame %>
<div class="relative" data-controller="drawer" data-action="keydown@window->drawer#onKeydown">
  <!-- Open button -->
  <button type="button"
          class="inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-white shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
          aria-controls="user-form-drawer"
          data-action="click->drawer#open">
    <svg class="size-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
    </svg>
    Edit Profile
  </button>

  <!-- Backdrop -->
  <div class="fixed inset-0 z-40 bg-gray-500/75 transition-opacity duration-500 ease-in-out opacity-0 pointer-events-none hidden"
       data-drawer-target="overlay"
       data-action="click->drawer#backdrop">
  </div>

  <!-- Dialog container -->
  <div tabindex="0" class="fixed inset-0 z-50 overflow-hidden focus:outline-none hidden pl-10 sm:pl-16"
       data-drawer-target="dialogContainer">
    <!-- Panel -->
    <div class="relative ml-auto block h-full max-w-md w-full transform transition duration-500 ease-in-out translate-x-full sm:duration-700 bg-white hidden"
         id="user-form-drawer"
         role="dialog"
         aria-modal="true"
         aria-labelledby="user-form-drawer-title"
         data-drawer-target="panel"
         data-drawer-open-class="translate-x-0"
         data-drawer-closed-class="translate-x-full"
         aria-hidden="true">
      
      <!-- Close button -->
      <div class="absolute top-0 left-0 -ml-8 flex pt-4 pr-2 duration-500 ease-in-out opacity-0 sm:-ml-10 sm:pr-4"
           data-drawer-target="closeButtonContainer">
        <button type="button"
                class="relative rounded-md text-gray-300 hover:text-white focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600"
                aria-label="Close panel"
                data-action="click->drawer#close">
          <span class="absolute -inset-2.5"></span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true" class="size-6">
            <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>

      <!-- Panel content -->
      <div class="relative h-full overflow-y-auto bg-white p-6">
        <div class="flex flex-col h-full">
          <header class="border-b pb-4 mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 -mx-6 px-6 pt-6 -mt-6">
            <div class="flex items-center gap-3 mb-2">
              <div class="flex-shrink-0 size-10 rounded-lg bg-blue-100 flex items-center justify-center">
                <svg class="size-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
              <div>
                <h2 id="user-form-drawer-title" class="text-xl font-semibold text-gray-900">Edit Profile</h2>
                <p class="text-sm text-gray-600 mt-0.5">Manage your account settings</p>
              </div>
            </div>
          </header>

          <!-- Turbo Frame for form -->
          <turbo-frame id="user-form-frame" class="flex-1 overflow-y-auto">
            <%= render partial: 'user_form_fields', locals: { user: user } %>
          </turbo-frame>
        </div>
      </div>
    </div>
  </div>
</div>

